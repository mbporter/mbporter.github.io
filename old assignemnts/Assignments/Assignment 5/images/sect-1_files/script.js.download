$(document).ready(function(){var siteController={init:function(){siteController.mobileNav();siteController.addSpanToLinks();siteController.aosInit();siteController.accessibility();siteController.toggleSearchMobile();siteController.fixedHeaderScroll();siteController.expandCollapse();siteController.accordion();siteController.tabs();siteController.activeNavItemDesktop();siteController.activeNavItemMobile();siteController.dataTable();siteController.responsiveTable();siteController.bgParallax();siteController.bgVideo();siteController.lightbox();siteController.blogCallout();siteController.blogFlexslider();siteController.responsiveVids()},mobileNav:function(){var $mobileMenu=$('#sidr');$mobileMenu.css("display","none");$('.menu-btn-mobile').on('click',function(){$mobileMenu.toggleClass('is-open');$mobileMenu.stop().animate({right:'0px'},500,'linear');if($mobileMenu.hasClass('is-open')){var $sidr=$('.sidr-inner'),$selected=$('.mobile-nav .selected');$mobileMenu.css("display","block");$("#search").stop().slideUp('fast').find('.search-input').val('').blur();$selected.parents('ul').show().prev('button').toggleClass("plus minus");$sidr.scrollTop(0).scrollTop(($selected.offset().top-$sidr.offset().top)-$(window).height()/2)}else{closeMobileMenu()}});$(document).on('keydown',function(event){if(event.key=="Escape"){closeMobileMenu()}});function closeMobileMenu(){$mobileMenu.stop().animate({right:'-1000px'},500,'linear',function(){$mobileMenu.css("display","none")})}
function trapFocus(element,elementOutOfTrap){var focusableEls=element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),firstFocusableEl=focusableEls[0],lastFocusableEl=focusableEls[focusableEls.length-1],KEYCODE_TAB=9;element.addEventListener('keydown',function(e){var isTabPressed=(e.key==='Tab'||e.keyCode===KEYCODE_TAB);if(!isTabPressed){return}
if(document.activeElement===lastFocusableEl){if(elementOutOfTrap===undefined){firstFocusableEl.focus()}else{elementOutOfTrap.focus()}
e.preventDefault()}})}
trapFocus(document.querySelector('.mobile-nav'),document.querySelector('.menu-btn-mobile'))},addSpanToLinks:function(){$(window).on('load',function(){if($("a[data-region-style='button']").length){}else{$('a:not(:has(*))').each(function(){$(this).wrapInner('<span></span>')})}})},aosInit:function(){AOS.init({once:!0,duration:750});$(window).on('resize',function(){if($(window).width()<=768){$('.photo-grid[data-aos]').attr('data-aos-anchor-placement','top-center');$('.full-width-hero_text[data-aos]').attr('data-aos-anchor-placement','center-bottom')}else{$('.photo-grid[data-aos]').attr('data-aos-offset','-100')}}).resize()},accessibility:function(){var fo=new FocusOverlay();$('.main-nav').on('focus',".nav-links > li",function(e){$('.nav-links .hover').removeClass('hover');$(this).closest('li').addClass('hover')});$('.main-nav_top, #main-content, .footer-wrapper').on('focusin click',function(){$('.nav-links .hover').removeClass('hover');$('.menu-btn').removeClass('is-opened')});if('ontouchstart' in window){$('.main-nav-link').each(function(index,elem){$(elem).children('a').on('focusin click',function(e){if($(elem).children().hasClass('flyout')){e.preventDefault();$('.nav-links .hover').removeClass('hover');$(this).closest('li').addClass('hover')}})})}
$('#search-desktop').on('focus',".search-input",function(){$(this).parent().addClass('hover')}).on('focusout',".search-input",function(){$(this).parent().removeClass('hover')})},toggleSearchMobile:function(){$(".search-btn-mobile").on("click",function(e){e.preventDefault();var $searchForm=$('#search');if($searchForm.is(":hidden")){$searchForm.stop().slideToggle('fast').find('.search-input').focus()}else{$searchForm.stop().slideToggle('fast')}})},fixedHeaderScroll:function(){var mainNavHeight=$('.main-nav').height();$(window).scroll(function(){var bannerHeight=$('.banner').height();if($(this).scrollTop()>bannerHeight){$('.banner').addClass('is-fixed');$('#main-wrapper').css('margin-top',mainNavHeight+'px')}else{$('.banner').removeClass('is-fixed');$('#main-wrapper').removeAttr('style')}}).scroll()},expandCollapse:function(){$(".plus").on("click",function(){$(this).toggleClass("plus minus").siblings('ul').stop().slideToggle();$(this).attr('aria-expanded',function(i,attr){return attr=='true'?'false':'true'});if($(this).closest(".mobile-nav").length>0){$(this).attr('aria-label',function(i,attr){return attr=='expand section'?'collapse section':'expand section'})}});$(".js-tab-target").each(function(index){var i=index+1;if($(this).hasClass('accordion-summary')){$(this).find('span').first().attr("id","accordion-header"+i)}else{$(this).closest("li").find("span").attr("id","accordion-header"+i)}
$(this).attr({"aria-controls":"accordion-content"+i,"aria-expanded":"false"});$(this).next().attr({"id":"accordion-content"+i,"aria-labelledby":"accordion-header"+i})});$('.list-widget').each(function(index){var i=index+1;$(this).closest('nav').attr("aria-labelledby","list-widget-head"+i).prev('h2').attr("id","list-widget-head"+i)})},accordion:function(){var sum='.accordion-summary';$(".accordion-expand").click(function(){$(this).text($(this).text()==="Collapse All"?"Expand All":"Collapse All");if($(this).hasClass("expand-all")){$(this).toggleClass("expand-all collapse-all").nextAll('.accordion-details').addClass('opened');$(this).nextAll(sum).addClass('selected').attr('aria-expanded','true')}else{$(this).toggleClass("expand-all collapse-all").nextAll('.accordion-details').removeClass('opened');$(this).nextAll(sum).removeClass('selected').attr('aria-expanded','false')}});$(sum).on("click",function(){$(this).next().toggleClass('opened');$(this).toggleClass('selected');$(this).attr('aria-expanded',function(i,attr){return attr=='true'?'false':'true'})})},tabs:function(){const tabSelectors=document.querySelectorAll('.js-tabs');for(const[i,tabs]of[...tabSelectors].entries()){tabs.setAttribute(`data-tabs-${i}`,'');new Tabby(`[data-tabs-${i}]`)}
const bodyStyles=window.getComputedStyle(document.body),scrollOffset=bodyStyles.getPropertyValue('--scroll-padding').replace("px",""),anchorSelector=document.querySelectorAll('.js-tabs a[href^="#"]');anchorSelector.forEach(item=>{item.addEventListener('click',event=>{event.preventDefault();var tabID=event.target.getAttribute('href');if(window.innerWidth<768){$('html, body').animate({scrollTop:$(tabID).offset().top-scrollOffset},250)}})})},activeNavItemDesktop:function(){OUC=typeof OUC==="undefined"?{}:OUC;OUC.dirname=typeof OUC.dirname==="undefined"?window.location.pathname:OUC.dirname;OUC.rootDirectory=OUC.dirname.replace(/\//,"");OUC.rootDirectory=OUC.rootDirectory.replace(/\/.*/,"");$(".nav-links>li>a").each(function(){var linkPath=$(this).attr('href').replace(/\//,"");linkPath=linkPath.replace(/\/.*/,"");if(linkPath==OUC.rootDirectory)
$(this).addClass("active")})},activeNavItemMobile:function(){$("nav.mobile-nav a").each(function(){if($(this).attr('href')==window.location.pathname)
$(this).addClass('selected');else if(window.location.pathname.match(/[\/]*$/)&&$(this).attr('href')==(window.location.pathname+'index.php'))
$(this).addClass('selected')})},dataTable:function(){if($('table.display:not([id])').length>0){$(function(){$.urlParam=function(name){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(window.location.href);if(!results){return}
return decodeURIComponent(results[1]||"")}
var ts=$('table.display');for(i=0;i<ts.length;i++){ts[i].id="DataTables_Table_"+i;var oTable=$('#DataTables_Table_'+i).DataTable({"dom":"Rf<\"#reset-table"+i+"\">rtpil","autoWidth":!1,"pageLength":25,"pagingType":"full_numbers","columnDefs":[{orderable:!1,aTargets:['noSort']},{visible:!1,aTargets:['dt-hidden-column']}],"order":[[0,"asc"]],"language":{"search":"Filter: "},"search":{"search":$.urlParam('search')}});$("#reset-table"+i).html('<span id="reset-table-btn'+i+'" class="reset-table"><a href="#">Reset Table</a></span>');$("#DataTables_Table_"+i+"_filter input").attr("placeholder","type keywords to filter table results");getResetClick(i)}
function getResetClick(i){var input=$("#DataTables_Table_"+i+"_filter input");$("#reset-table-btn"+i).on("click",function(event){event.preventDefault()
var oTable=$('#DataTables_Table_'+i).DataTable();input.val('').keyup();oTable.order([0,'asc']).draw()});if(input.val()!=''){$("#reset-table"+i).show()}else{$("#reset-table"+i).hide()}
$('#DataTables_Table_'+i+' th').on("click",function(){$("#reset-table"+i).show()});input.on({keydown:function(){$("#reset-table"+i).show()},keyup:function(){if(input.val()==''){$("#reset-table"+i).hide()}}})}})}},responsiveTable:function(){$('table.regular').each(function(index,elem){var i=index+1;$(this).addClass('regular-'+i)})},bgParallax:function(){if("ontouchstart" in window){}else{const bgElems=document.querySelectorAll("#landing-img, .full-width-hero_img");for(var i=0;i<bgElems.length;i++){const simpleParallax=(id,modifier)=>{let paraId=bgElems[i];const sp=()=>{let x=paraId.getBoundingClientRect().top/modifier;let y=Math.round(x*100)/100;paraId.style.backgroundPosition='center '+y+'px'}
sp();window.addEventListener('scroll',function(e){sp()})}
simpleParallax(bgElems[i],8)}}},bgVideo:function(){var $bgVideos=$(".video-bg");$bgVideos.each(function(index,elem){var i=index+1;$bgVideos.attr('id','player'+i)
var $player=$(elem),bgVideoSource=elem.querySelector('.js-video-source'),$bgVideoSource=$player.find('.js-video-source'),$videoBtn=$player.next('.js-video-btn'),$videoBtnText=$videoBtn.find('span'),$playIcon=$videoBtn.find('.play-icon'),$pauseIcon=$videoBtn.find('.pause-icon');$videoBtn.on('click',function(){if(elem.paused){elem.play();showPauseIcon()}else{elem.pause();showPlayIcon()}});if(document.body.contains(bgVideoSource)){$(window).on('resize',function(){if($(window).innerWidth()>=768){if(bgVideoSource.getAttribute('src')==="javascript:void(0)"||!bgVideoSource.hasAttribute('src')){bgVideoSource.setAttribute("src",bgVideoSource.getAttribute("data-src"));elem.load();if(elem.readyState===4){elem.play()}}}else if(bgVideoSource.getAttribute('src')!=="javascript:void(0)"){bgVideoSource.setAttribute("src","javascript:void(0)")}}).resize()}
const options={root:null,rootMargin:'0px',threshold:0.5}
function callback(entries,observer){entries.forEach(entry=>{if(entry.isIntersecting){entry.target.play();showPauseIcon()}else{entry.target.pause();showPlayIcon()}})};let observer=new IntersectionObserver(callback,options);observer.observe(elem);function showPlayIcon(){$playIcon.show();$pauseIcon.hide();$videoBtnText.text('Play Background Video')}
function showPauseIcon(){$playIcon.hide();$pauseIcon.show();$videoBtnText.text('Pause Background Video')}})},lightbox:function(){jQuery.fn.extend({renameAttr:function(name,newName,removeData){var val;return this.each(function(){val=jQuery.attr(this,name);jQuery.attr(this,newName,val);jQuery.removeAttr(this,name);if(removeData!==!1){jQuery.removeData(this,name.replace('data-',''))}})}});var fancyboxItems='.fancybox, a.lightbox-img, span.lightbox-img a';$(fancyboxItems).renameAttr("rel","data-fancybox");$(fancyboxItems).renameAttr("data-fancybox-group","data-fancybox");$(fancyboxItems).renameAttr("title","data-caption");var updatefc=function(instance,current){var $fc=current.$fc}
if($(fancyboxItems).length>0){$(fancyboxItems).fancybox({preventCaptionOverlap:!1,wheel:!1,idleTime:!1,infobar:!0,caption:$.noop,afterLoad:function(instance,current){current.$fc=$('<div class="fancybox-custom-caption">'+current.opts.$orig.data('caption')+'</div>').appendTo(current.$content);updatefc(instance,current)},onUpdate:function(instance,current){updatefc(instance,current)},mobile:{clickSlide:"close",}})}
$('.lightbox-video, .callout img').closest('.callout').addClass('mod-media')
if($('.lightbox-video').length>0){$('.lightbox-video').fancybox({idleTime:!1,youtube:{autoplay:1}})}},blogCallout:function(){$(window).on('load',function(){if($(window).width()>=767){$('.callout.mod-inline img').each(function(index,elem){var imgWidth=$(elem).width();$(elem).closest('.callout.mod-inline').css('width',imgWidth)})}})},blogFlexslider:function(){(function(){var centerControls=function(){var imgHeight=$('.callout.mod-slider img').height();$('.flex-direction-nav').css('height',imgHeight)};$(window).resize(centerControls);$('.callout.mod-slider .sub-text').prepend('Image <span class=\"current-slide\"></span> of <span class=\"total-slides\"></span> - ');var $currentSlide=$('.current-slide');var $totalSlides=$('.total-slides');if($('.flexslider').length>0){$('.callout.mod-slider .flexslider').flexslider({slideshow:!1,controlNav:!1,start:function(slider){$(slider).find($currentSlide).html(slider.currentSlide+1);$(slider).find($totalSlides).html(slider.count);centerControls()},after:function(slider){$(slider).find($currentSlide).html(slider.currentSlide+1);$(slider).find($totalSlides).html(slider.count)}})}})()},responsiveVids:function(){function vidRatio(){fluidvids.init({selector:['iframe','object'],players:['www.youtube.com','player.vimeo.com','www.facebook.com']})}
vidRatio();if($('.lazyload-video').length>0){$('.lazyload-video').lazyload({load:vidRatio,trigger:'click'})}}};siteController.init()})